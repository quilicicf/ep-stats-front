<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Empires & Puzzles - Stats</title>
  <link rel="icon" type="image/png" href="/assets/icon.png">
  <link rel="stylesheet" href="dist/app.css" />
  <script src="dist/app.js"></script>
</head>

<body>

<div id="elm"></div>
<script>
  const stateKey = 'state';
  const storedState = localStorage.getItem(stateKey);
  const startingState = storedState ? JSON.parse(storedState) : null;
  const app = Elm.Main.init({
    flags: startingState,
    node: document.getElementById('elm'),
  });

  app.ports.setStorage.subscribe((state) => {
    localStorage.setItem(stateKey, JSON.stringify(state));
  });
</script>
</body>
</html>
